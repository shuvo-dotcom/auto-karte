(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{3826:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>I});var r=n(5155),o=n(2115);function l(e,t){return Object.freeze({...e,...t})}let i=(0,o.createContext)(null);function a(){let e=(0,o.use)(i);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var u=n(5027),c=n.n(u);let s=(0,o.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:r,className:l,id:a,placeholder:c,style:s,whenReady:f,zoom:d,...p},m){let[x]=(0,o.useState)({className:l,id:a,style:s}),[h,g]=(0,o.useState)(null),y=(0,o.useRef)(void 0);(0,o.useImperativeHandle)(m,()=>h?.map??null,[h]);let v=(0,o.useCallback)(r=>{if(null!==r&&!y.current){let o=new u.Map(r,p);y.current=o,null!=n&&null!=d?o.setView(n,d):null!=e&&o.fitBounds(e,t),null!=f&&o.whenReady(f),g(Object.freeze({__version:1,map:o}))}},[]);(0,o.useEffect)(()=>()=>{h?.map.remove()},[h]);let b=h?o.createElement(i,{value:h},r):c??null;return o.createElement("div",{...x,ref:v},b)});var f=n(7650);function d(e){return(0,o.forwardRef)(function(t,n){let{instance:r,context:l}=e(t).current;(0,o.useImperativeHandle)(n,()=>r);let{children:a}=t;return null==a?null:o.createElement(i,{value:l},a)})}function p(e,t){let n=(0,o.useRef)(t);(0,o.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function m(e,t){let n=(0,o.useRef)(void 0);(0,o.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function x(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}function h(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function g(e,t){return null==t?function(t,n){let r=(0,o.useRef)(void 0);return r.current||(r.current=e(t,n)),r}:function(n,r){let l=(0,o.useRef)(void 0);l.current||(l.current=e(n,r));let i=(0,o.useRef)(n),{instance:a}=l.current;return(0,o.useEffect)(function(){i.current!==n&&(t(a,n,i.current),i.current=n)},[a,n,t]),l}}function y(e,t){(0,o.useEffect)(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function v(e){return function(t){let n=a(),r=e(x(t,n),n);return p(n.map,t.attribution),m(r.current,t.eventHandlers),y(r.current,n),r}}let b=function(e,t){var n;return n=v(g(e,t)),(0,o.forwardRef)(function(e,t){let{instance:r}=n(e).current;return(0,o.useImperativeHandle)(t,()=>r),null})}(function({url:e,...t},n){return h(new u.TileLayer(e,x(t,n)),n)},function(e,t,n){let{opacity:r,zIndex:o}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=o&&o!==n.zIndex&&e.setZIndex(o);let{url:l}=t;null!=l&&l!==n.url&&e.setUrl(l)}),w=d(v(g(function({position:e,...t},n){let r=new u.Marker(e,t);return h(r,l(n,{overlayContainer:r}))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}))),j=function(e,t){var n,r;return n=g(e),r=function(e,r){let o=a(),l=n(x(e,o),o);return p(o.map,e.attribution),m(l.current,e.eventHandlers),t(l.current,o,e,r),l},(0,o.forwardRef)(function(e,t){let[n,l]=(0,o.useState)(!1),{instance:i}=r(e,l).current;(0,o.useImperativeHandle)(t,()=>i),(0,o.useEffect)(function(){n&&i.update()},[i,n,e.children]);let a=i._contentNode;return a?(0,f.createPortal)(e.children,a):null})}(function(e,t){return h(new u.Popup(e,t.overlayContainer),t)},function(e,t,{position:n},r){(0,o.useEffect)(function(){let{instance:o}=e;function l(e){e.popup===o&&(o.update(),r(!0))}function i(e){e.popup===o&&r(!1)}return t.map.on({popupopen:l,popupclose:i}),null==t.overlayContainer?(null!=n&&o.setLatLng(n),o.openOn(t.map)):t.overlayContainer.bindPopup(o),function(){t.map.off({popupopen:l,popupclose:i}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(o)}},[e,t,r,n])}),C=function(e,t){var n;return d((n=g(e,t),function(e){let t=a(),r=n(x(e,t),t);m(r.current,e.eventHandlers),y(r.current,t);var l=r.current;let i=(0,o.useRef)(void 0);return(0,o.useEffect)(function(){if(e.pathOptions!==i.current){let t=e.pathOptions??{};l.instance.setStyle(t),i.current=t}},[l,e]),r}))}(function({positions:e,...t},n){let r=new u.Polyline(e,t);return h(r,l(n,{overlayContainer:r}))},function(e,t,n){t.positions!==n.positions&&e.setLatLngs(t.positions)});n(5603);var N=n(9123);delete c().Icon.Default.prototype._getIconUrl,c().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});let E=e=>{let{selectedFacilities:t,connections:n,filterType:r,showAllFacilities:l,selectedCountry:i,allFacilities:u}=e,s=a().map;return(0,o.useEffect)(()=>{if(t.length>0){let e=c().latLngBounds(t.map(e=>[e.coordinates[0],e.coordinates[1]]));s.fitBounds(e,{padding:[20,20]})}else if(i&&N.ct[i]){let[e,t]=N.ct[i];s.setView([e,t],6)}else if(l){let e=c().latLngBounds(u.map(e=>[e.coordinates[0],e.coordinates[1]]));s.fitBounds(e,{padding:[20,20]})}else s.setView([20,0],2)},[t,l,i,u,s]),null},I=e=>{let{selectedFacilities:t,connections:n,onFacilitySelect:l,onFacilityDeselect:i,filterType:a,showAllFacilities:u=!1,selectedCountry:f,allFacilities:d}=e,[p,m]=(0,o.useState)([]);(0,o.useEffect)(()=>{let e=d;f&&(e=e.filter(e=>e.country===f)),a&&(e=e.filter(e=>e.type===a)),m(e)},[a,f,d]);let x=e=>{t.some(t=>t.id===e.id)?i(e.id):l(e)};return(0,r.jsx)("div",{className:"w-full h-full",children:(0,r.jsxs)(s,{center:[20,0],zoom:2,style:{height:"100%",width:"100%"},className:"z-0",children:[(0,r.jsx)(b,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,r.jsx)(E,{selectedFacilities:t,connections:n,filterType:a,showAllFacilities:u,selectedCountry:f,allFacilities:d}),(u?d:p).map(e=>(0,r.jsx)(w,{position:[e.coordinates[0],e.coordinates[1]],icon:(e=>{let n=t.some(t=>t.id===e.id)?"#ff0000":N.m0[e.type];return c().divIcon({className:"custom-div-icon",html:'\n        <div style="\n          background-color: '.concat(n,';\n          width: 20px;\n          height: 20px;\n          border-radius: 50%;\n          border: 2px solid white;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 12px;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n        ">\n          ').concat(N.MA[e.type],"\n        </div>\n      "),iconSize:[20,20],iconAnchor:[10,10]})})(e),eventHandlers:{click:()=>x(e)},children:(0,r.jsx)(j,{children:(0,r.jsxs)("div",{className:"p-2",children:[(0,r.jsx)("h3",{className:"font-bold text-lg",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[N.MA[e.type]," ",e.type.replace("_"," ").toUpperCase()]}),(0,r.jsxs)("p",{className:"text-sm font-medium text-blue-600",children:["Country: ",e.country]}),(0,r.jsxs)("p",{className:"text-sm",children:["Capacity: ",e.capacity," MW"]}),(0,r.jsxs)("p",{className:"text-sm",children:["Region: ",e.region]}),(0,r.jsxs)("p",{className:"text-sm",children:["Status: ",e.status]}),e.description&&(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.description}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("button",{className:"px-3 py-1 bg-blue-500 text-white rounded text-xs hover:bg-blue-600",onClick:()=>x(e),children:t.some(t=>t.id===e.id)?"Deselect":"Select"})})]})})},e.id)),n.map(e=>{let t=(e=>{let t=d.find(t=>t.id===e.from),n=d.find(t=>t.id===e.to);return t&&n?[[t.coordinates[0],t.coordinates[1]],[n.coordinates[0],n.coordinates[1]]]:[]})(e);return 2===t.length?(0,r.jsx)(C,{positions:t,color:e.color||"#ff0000",weight:3,opacity:.7,dashArray:"dashed"===e.type?"5, 5":void 0},e.id):null})]})})}},5603:()=>{}}]);